<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='This post contains documentation for the setup of this blog. Hopefully this site will be so stable that I&rsquo;ll totally forget how I set it up when I come back years from now to make a change&hellip;
Setup the development environment Create the directory structure.
mkdir ~/Documents/Developer/mattkopecki.github.com cd ~/Documents/Developer/mattkopecki.github.com mkdir site  Install Hugo brew install hugo hugo version  Create the Github repository I already had a github repo set up for a user/organization page.'>
<meta name='theme-color' content='#4286f4'>

<meta property='og:title' content='Documentation • Matt Kopecki'>
<meta property='og:description' content='This post contains documentation for the setup of this blog. Hopefully this site will be so stable that I&rsquo;ll totally forget how I set it up when I come back years from now to make a change&hellip;
Setup the development environment Create the directory structure.
mkdir ~/Documents/Developer/mattkopecki.github.com cd ~/Documents/Developer/mattkopecki.github.com mkdir site  Install Hugo brew install hugo hugo version  Create the Github repository I already had a github repo set up for a user/organization page.'>
<meta property='og:url' content='https://mattkopecki.github.com.com/post/documentation/'>
<meta property='og:site_name' content='Matt Kopecki'>
<meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='hugo'><meta property='article:tag' content='web'><meta property='article:published_time' content='2018-04-16T21:26:01-05:00'/><meta property='article:modified_time' content='2018-04-16T21:26:01-05:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.42.1" />

  <title>Documentation • Matt Kopecki</title>
  <link rel='canonical' href='https://mattkopecki.github.com.com/post/documentation/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.67e9c12b.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#4286f4;}
</style>

<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-48215701-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>


<body class='page type-post has-sidebar'>

  <div class='site'>

    <div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
    Matt Kopecki
    </h2>
    <div class='desc'>
    
    </div>
  </header>

</section>
</div>

  <div class='sidebar-overlay'></div>
</div>

    <div class='main'>

      <nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='/post/'>Blog</a>
      </li><li class='item'>
        <a href='/brew/'>Brew</a>
      </li><li class='item'>
        <a href='/garage/'>Garage</a>
      </li></ul>
  </div>
</nav>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Matt Kopecki</p><p class='desc site-desc'></p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      
      <h1 class='title'>Documentation</h1>
      
      

    </div>
    
<div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2018-04-16T21:26:01-05:00'>Apr 16, 2018</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
4 min read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<p>This post contains documentation for the setup of this blog. Hopefully this site will be so stable that I&rsquo;ll totally forget how I set it up when I come back years from now to make a change&hellip;</p>

<h2 id="setup-the-development-environment">Setup the development environment</h2>

<p>Create the directory structure.</p>

<pre><code>mkdir ~/Documents/Developer/mattkopecki.github.com
cd ~/Documents/Developer/mattkopecki.github.com
mkdir site
</code></pre>

<h2 id="install-hugo">Install Hugo</h2>

<pre><code>brew install hugo
hugo version
</code></pre>

<h2 id="create-the-github-repository">Create the Github repository</h2>

<p>I already had a github repo set up for a user/organization page.</p>

<p>This site is hosted in the repository named <code>mattkopecki.github.com</code> at the address <a href="https://github.com/mattkopecki/mattkopecki.github.com" target="_blank">https://github.com/mattkopecki/mattkopecki.github.com</a></p>

<p>You have to follow this repo scheme. Make it public, do not add a README file, a .gitignore or a license file. The <code>master</code> branch is the branch where generated pages are hosted, you don’t want any non mandatory files there.</p>

<h2 id="initiate-repository-branches">Initiate repository branches</h2>

<p>Push the first commit on the <code>master</code> branch to create it. Generated pages will be pushed on this branch.</p>

<pre><code>cd site
git init
git remote add origin git@github.com:mattkopecki/mattkopecki.github.com.git
git commit --allow-empty -m &quot;Start the public branch&quot;
git push -u origin master
</code></pre>

<p>Create the <code>source</code> branch. Website source code will be pushed on this branch.
The <code>source</code> branch has to have a .gitignore file to avoid committing generated or temporary files. I used the online tool gitignore.io to generate a .gitignore file that ignores the proper files for OS X, my text editor, and Hugo in one curl command.</p>

<pre><code>git checkout --orphan source
curl -L -s -o .gitignore https://www.gitignore.io/api/osx%2Chugo%2Csublimetext
git add .gitignore
git commit -m &quot;added gitignore file&quot;
git push origin source
</code></pre>

<p>Verify that the .gitignore file generated at the previous step contains the line /public/. If the line does not exist add it and commit this change.</p>

<pre><code>cat .gitignore | grep public
/public/
</code></pre>

<p>Use the git worktree feature to checkout the <code>master</code> branch to the ignored public sub-folder.
Why? By default, Hugo generates the site in the public folder. Having the <code>master</code> branch mapped to the public folder makes it possible to easily chain site generation and publication steps without moving around files.</p>

<pre><code>rm -rf public
git worktree add -B master public origin/master
</code></pre>

<h2 id="configure-and-generate-the-site">Configure and generate the site</h2>

<p>Create a new empty site tree.</p>

<pre><code>git checkout source
./hugo new site . --force
git add config.toml archetypes/default.md
git commit -m &quot;Add fresh empty site&quot;
git push origin source
</code></pre>

<p>Add a Hugo theme. This site currently uses the minimo theme because it’s clean/minimalist, it supports categories/tags, renders correctly on desktop and mobile phones, and has built-in hooks to add custom Javascript and CSS.</p>

<pre><code>git submodule add https://github.com/MunifTanjim/minimo themes/minimo
git submodule init
git submodule update
cp themes/minimo/exampleSite/config.toml .
</code></pre>

<p>Modify the config.toml configuration file of the site and commit the changes.</p>

<pre><code>git add config.toml .gitmodules themes/minimo 
git commit -m &quot;Add minimo theme&quot;
git push origin source
</code></pre>

<p>Test the site with the <code>-D</code> flag to see draft posts shown.</p>

<pre><code>hugo server -D
</code></pre>

<p>If you open your web browser and you visit the address <a href="http://localhost:1313/" target="_blank">http://localhost:1313/</a> the site should load even if there is no content for the moment.</p>

<h2 id="github-page-custom-domain">Github page custom domain</h2>

<p>Create a file named CNAME that only contains the domain name. Add this file to the local copy of master in the static folder to have it deployed on each website generation.</p>

<pre><code>git add static/CNAME
git commit -m &quot;Add CNAME file in static folder&quot;
git push origin source
</code></pre>

<h2 id="add-the-first-post">Add the first post</h2>

<p>Replace the Hugo default template by the theme default template and generate the first post skeleton.</p>

<pre><code>cp themes/minimo/archetypes/default.md archetypes/default.md
hugo new post/first-post.md
</code></pre>

<p>Edit the content/post/first-post.md file. There is only the front matter right after the generation. Below the last line of the front matter, the one with the 3 dashes &mdash; is where you add the content of the post. The format used is Markdown.</p>

<h2 id="publish-the-site-with-the-new-post">Publish the site with the new post</h2>

<p>To publish the site in one command, use the publish_to_master.sh script at the root of the repository.</p>

<p>Commit any changes and then run the script to publish the site.</p>

<pre><code>git add * 
git commit -m &quot;commit message&quot;
git push origin source
./publish_to_master.sh
</code></pre>

<hr />

<h1 id="v2">v2</h1>

<p>I found myself wanting to publish from more than just one machine. Of course all the source is available in my Github repo but to have Hugo installed and be able to rebuild and publish the site wasn&rsquo;t always a given.</p>

<p>Looking in to it, I followed a solution very similar to <a href="ttps://gohugo.io/hosting-and-deployment/deployment-with-wercker/" target="_blank">this</a> using Wercker to remotely build and deploy my site whenever I push commits to the right branch in Github.</p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  <div class='categories'>
  <span class='taxonomy-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
</span>
  <span class='screen-reader-text'>Categories: </span><a class='category' href='/categories/dev'>Dev</a></div>
<div class='tags'>
  <span class='taxonomy-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
</span>
  <span class='screen-reader-text'>Tags: </span><a class='tag' href='/tags/hugo'>Hugo</a>, <a class='tag' href='/tags/web'>Web</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='next-entry sep-before'>
      <a href='/post/2018-verizon-data-breach-report/'>
        <span class='screen-reader-text'>Next post: </span>The Single Most Important Thing from the 2018 Verizon Data Breach Report<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'>
          <section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/mattkopecki' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://facebook.com/mattkopecki' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Facebook account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://instagram.com/mattkopecki' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Instagram account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
  <line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:mattkopecki@gmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/mattkopecki' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section>
          <div class='copyright'>
  <p> &copy; 2018-2019 Matt Kopecki </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__public_path__='\/assets\/js\/'</script>

<script src='/assets/js/main.0d92f56c.js'></script><script src='/js/custom.js'></script>
</body>

</html>

